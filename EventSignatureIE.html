<!DOCTYPE HTML>
<html>
<head>
<script>
		wo = window.onload;
		window.onload = function() {
			wo && wo.call(null);
			
			// Get the image
			var sampleImage = document.getElementById("EventImage"),
			canvas = convertImageToCanvas(sampleImage);
			
			// Actions
			document.getElementById("canvasHolder").appendChild(canvas);
			document.getElementById("pngHolder").appendChild(convertCanvasToImage(canvas));
			
			// Converts image to canvas; returns new canvas element
			function convertImageToCanvas(image) {
				var canvas = document.createElement("canvas");
                var context = canvas.getContext("2d");
				canvas.width = image.width;
				canvas.height = image.height;
				context.drawImage(image, 5, 5);
                var x = canvas.width / 2;
                var y = canvas.height / 2;

              //context.font = ".9em 'times new roman'";
              context.font = "12px 'calibri'";
              context.fillStyle="#ffffff";
              context.textAlign="center";       
              context.shadowColor="#000000";
              context.shadowBlur=3;
              context.lineWidth=2;                    
              context.fillText("line 1", x, 104);
              context.fillText("line 2", x, 116);
           
				return canvas;
			}

			// Converts canvas to an image
			function convertCanvasToImage(canvas) {
				var image = new Image();
				image.src = canvas.toDataURL("image/png");
				return image;
			}
		};
	</script>
</head>
<body>
<div><img id="EventImage" src="./images/PMA_Email-Signature.jpg"></div>
<div id="canvasHolder" ></div>
<div id="pngHolder"></div>
</head>
</html>